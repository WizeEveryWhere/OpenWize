<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="net__mgr_8c" kind="file" language="C++">
    <compoundname>net_mgr.c</compoundname>
    <includes local="no">string.h</includes>
    <includes local="no">stdio.h</includes>
    <includes refid="net__mgr_8h" local="yes">net_mgr.h</includes>
    <includes local="yes">rtos_macro.h</includes>
    <includes refid="logger_8h" local="yes">logger.h</includes>
    <incdepgraph>
      <node id="20">
        <label>stdarg.h</label>
      </node>
      <node id="1">
        <label>/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c</label>
        <link refid="net__mgr_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>net_api_private.h</label>
        <link refid="net__api__private_8h"/>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
      </node>
      <node id="15">
        <label>assert.h</label>
      </node>
      <node id="8">
        <label>stdint.h</label>
      </node>
      <node id="16">
        <label>time_evt.h</label>
        <link refid="time__evt_8h"/>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>proto.h</label>
        <link refid="proto_8h"/>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="14">
        <label>stddef.h</label>
      </node>
      <node id="21">
        <label>OpenWize_config.h</label>
      </node>
      <node id="10">
        <label>phy_itf.h</label>
        <link refid="phy__itf_8h"/>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
      </node>
      <node id="5">
        <label>limits.h</label>
      </node>
      <node id="2">
        <label>string.h</label>
      </node>
      <node id="13">
        <label>proto_private.h</label>
        <link refid="proto__private_8h"/>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="18">
        <label>rtos_macro.h</label>
      </node>
      <node id="4">
        <label>net_mgr.h</label>
        <link refid="net__mgr_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
      </node>
      <node id="17">
        <label>time.h</label>
      </node>
      <node id="12">
        <label>proto_api.h</label>
        <link refid="proto__api_8h"/>
        <childnode refid="13" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>phy_layer.h</label>
        <link refid="phy__layer_8h"/>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>net_api.h</label>
        <link refid="net__api_8h"/>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="19">
        <label>logger.h</label>
        <link refid="logger_8h"/>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="20" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="21" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="func">
      <memberdef kind="function" id="group__wize__net__mgr_1ga2b3d6e33db0904e597e5f8e59ba17839" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void NetMgr_Setup</definition>
        <argsstring>(phydev_t *pPhyDev, wize_net_t *pWizeNet)</argsstring>
        <name>NetMgr_Setup</name>
        <param>
          <type><ref refid="group__wize__phy__itf_1ga48d87fbfe68868db2de6fbe15e8310c8" kindref="member">phydev_t</ref> *</type>
          <declname>pPhyDev</declname>
        </param>
        <param>
          <type><ref refid="group__wize__net__api_1ga3a430a72aef99fbe3d4d227aaec8099b" kindref="member">wize_net_t</ref> *</type>
          <declname>pWizeNet</declname>
        </param>
        <briefdescription>
<para>This function setup the NetMgr module. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">pPhyDev</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer on the Phy device structure </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">pWizeNet</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer on the Wize network context</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="111" column="6" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="111" bodyend="136" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="107" declcolumn="6"/>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga93fdfbb50319f7587f3822fa309c4c47" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_Init</definition>
        <argsstring>(void)</argsstring>
        <name>NetMgr_Init</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>This function initialize the NetMgr module. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="145" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="145" bodyend="157" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="108" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" compoundref="net__mgr_8h" startline="71">NET_STATUS_ERROR</references>
        <references refid="group__time__evt_1ga7c59534f9e854577f5c3527ee579812a" compoundref="time__evt_8c" startline="95" endline="116">TimeEvt_TimerInit</references>
        <references refid="group__time__evt_1gga8fcf7b8fdc4fc8ab6ccc2d6a79de908eaddac08a780f49730bf18fbc72cb7de46" compoundref="time__evt_8h" startline="58">TIMEEVT_CFG_ONESHOT</references>
        <references refid="group__wize__net__api_1gadba355920bf6ac45fb3939cfbb713e3a" compoundref="net__api_8c" startline="85" endline="107">WizeNet_Init</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga7cb7be2b8675c73ac3092634358d534b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_Uninit</definition>
        <argsstring>(void)</argsstring>
        <name>NetMgr_Uninit</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>This function de-initialize the NetMgr module. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="166" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="166" bodyend="175"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" compoundref="net__mgr_8h" startline="71">NET_STATUS_ERROR</references>
        <references refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" compoundref="time__evt_8c" startline="185" endline="209">TimeEvt_TimerStop</references>
        <references refid="group__wize__net__api_1gafa0c0d696000e9c838c1892d8a7a2d9e" compoundref="net__api_8c" startline="119" endline="132">WizeNet_Uninit</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga3f89ec63616af2f1315b9e234ddf2c5e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_Open</definition>
        <argsstring>(void *hTaskToNotify)</argsstring>
        <name>NetMgr_Open</name>
        <param>
          <type>void *</type>
          <declname>hTaskToNotify</declname>
        </param>
        <briefdescription>
<para>This function open (acquire) the device. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">hTaskToNotify</parametername>
</parameternamelist>
<parameterdescription>
<para>Task handle which will get events back from NetMgr. If NULL, then the caller task will be notified.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="188" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="188" bodyend="211" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="110" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" compoundref="net__mgr_8h" startline="72">NET_STATUS_BUSY</references>
        <references refid="group__wize__net__mgr_1ga93fdfbb50319f7587f3822fa309c4c47" compoundref="net__mgr_8c" startline="145" endline="157">NetMgr_Init</references>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" compoundref="net__mgr_8h" startline="70">NET_STATUS_OK</references>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" compoundref="net__mgr_8h" startline="71">NET_STATUS_ERROR</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga9fcf4c3978cbc4f9a3765fc818f14e4a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_Close</definition>
        <argsstring>(void)</argsstring>
        <name>NetMgr_Close</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>This function release the device. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="219" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="219" bodyend="230" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="111" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1ga7cb7be2b8675c73ac3092634358d534b" compoundref="net__mgr_8c" startline="166" endline="175">NetMgr_Uninit</references>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" compoundref="net__mgr_8h" startline="70">NET_STATUS_OK</references>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" compoundref="net__mgr_8h" startline="72">NET_STATUS_BUSY</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1gacf1a1d58d91c09e6505d6c09a32a35b0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_SetUplink</definition>
        <argsstring>(phy_chan_e eChannel, phy_mod_e eMod)</argsstring>
        <name>NetMgr_SetUplink</name>
        <param>
          <type><ref refid="group__wize__phy__itf_1gaf0a30dbd383c5ecdd20797b1b76b16cd" kindref="member">phy_chan_e</ref></type>
          <declname>eChannel</declname>
        </param>
        <param>
          <type><ref refid="group__wize__phy__itf_1ga896b435cd1e07f9e75d557d00e063640" kindref="member">phy_mod_e</ref></type>
          <declname>eMod</declname>
        </param>
        <briefdescription>
<para>This function set the uplink channel and modulation. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">eChannel</parametername>
</parameternamelist>
<parameterdescription>
<para>Channel to set </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">eMod</parametername>
</parameternamelist>
<parameterdescription>
<para>Modulation to set</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="242" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="242" bodyend="260" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="113" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" compoundref="net__mgr_8h" startline="72">NET_STATUS_BUSY</references>
        <references refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" compoundref="net__api_8c" startline="311" endline="546">WizeNet_Ioctl</references>
        <references refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a76e38932444df5acef512e30ea570a10" compoundref="net__api__private_8h" startline="68">NETDEV_CTL_SET_UPLINK_CH</references>
        <references refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" compoundref="net__api__private_8h" startline="119">NETDEV_STATUS_OK</references>
        <references refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a0694afdbbb1fdcb02002becc512bc37b" compoundref="net__api__private_8h" startline="69">NETDEV_CTL_SET_UPLINK_MOD</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga8a68d7f5083d83191fefef6df42006c6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_SetDwlink</definition>
        <argsstring>(phy_chan_e eChannel, phy_mod_e eMod)</argsstring>
        <name>NetMgr_SetDwlink</name>
        <param>
          <type><ref refid="group__wize__phy__itf_1gaf0a30dbd383c5ecdd20797b1b76b16cd" kindref="member">phy_chan_e</ref></type>
          <declname>eChannel</declname>
        </param>
        <param>
          <type><ref refid="group__wize__phy__itf_1ga896b435cd1e07f9e75d557d00e063640" kindref="member">phy_mod_e</ref></type>
          <declname>eMod</declname>
        </param>
        <briefdescription>
<para>This function set the downlink channel and modulation. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">eChannel</parametername>
</parameternamelist>
<parameterdescription>
<para>Channel to set </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">eMod</parametername>
</parameternamelist>
<parameterdescription>
<para>Modulation to set</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="272" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="272" bodyend="290" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="114" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" compoundref="net__mgr_8h" startline="72">NET_STATUS_BUSY</references>
        <references refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" compoundref="net__api_8c" startline="311" endline="546">WizeNet_Ioctl</references>
        <references refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a83701ee21336ef6256368be0b7fef2e3" compoundref="net__api__private_8h" startline="70">NETDEV_CTL_SET_DWLINK_CH</references>
        <references refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" compoundref="net__api__private_8h" startline="119">NETDEV_STATUS_OK</references>
        <references refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672ac28da7956b6f7964b75e6f9b7f072272" compoundref="net__api__private_8h" startline="71">NETDEV_CTL_SET_DWLINK_MOD</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga170822ccc281fab3fa79b97bbab5c02b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_Ioctl</definition>
        <argsstring>(uint32_t eCtl, uint32_t args)</argsstring>
        <name>NetMgr_Ioctl</name>
        <param>
          <type>uint32_t</type>
          <declname>eCtl</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>args</declname>
        </param>
        <briefdescription>
<para>This function set/get the network device ctl. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">eCtl</parametername>
</parameternamelist>
<parameterdescription>
<para>CTL to set </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">args</parametername>
</parameternamelist>
<parameterdescription>
<para>extra argument</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="302" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="302" bodyend="316" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="115" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" compoundref="net__mgr_8h" startline="72">NET_STATUS_BUSY</references>
        <references refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" compoundref="net__api_8c" startline="311" endline="546">WizeNet_Ioctl</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga3612af35635579e2cfe4ea7850366941" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_Send</definition>
        <argsstring>(net_msg_t *pxNetMsg, uint32_t u32TimeOut)</argsstring>
        <name>NetMgr_Send</name>
        <param>
          <type><ref refid="group__wize__proto_1gaa869d642cfdd1c06d14478f701389342" kindref="member">net_msg_t</ref> *</type>
          <declname>pxNetMsg</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>u32TimeOut</declname>
        </param>
        <briefdescription>
<para>This function send the given message. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">pxNetMsg</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the message to send </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">u32TimeOut</parametername>
</parameternamelist>
<parameterdescription>
<para>Timeout in millisecond</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="328" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="328" bodyend="371" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="116" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" compoundref="net__mgr_8h" startline="71">NET_STATUS_ERROR</references>
        <references refid="structnet__msg__s_1afe7bd3b4d167a78b1320114b9720c1a2" compoundref="proto_8h" startline="167">net_msg_s::pData</references>
        <references refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" compoundref="proto_8h" startline="171">net_msg_s::u8Type</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1gacff959e8b27662070573a8aef4bb6fe8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_Listen</definition>
        <argsstring>(net_msg_t *pxNetMsg, uint32_t u32TimeOut, net_listen_type_e eListenType)</argsstring>
        <name>NetMgr_Listen</name>
        <param>
          <type><ref refid="group__wize__proto_1gaa869d642cfdd1c06d14478f701389342" kindref="member">net_msg_t</ref> *</type>
          <declname>pxNetMsg</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>u32TimeOut</declname>
        </param>
        <param>
          <type><ref refid="group__wize__net__mgr_1gaa14214208285671836bdb8eccf56719b" kindref="member">net_listen_type_e</ref></type>
          <declname>eListenType</declname>
        </param>
        <briefdescription>
<para>This function listen for the given message. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">pxNetMsg</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the message to listen. The <ref refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" kindref="member">net_msg_t::u8Type</ref> field select the filtered message). </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">u32TimeOut</parametername>
</parameternamelist>
<parameterdescription>
<para>Timeout in millisecond </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">eListenType</parametername>
</parameternamelist>
<parameterdescription>
<para>Listen type define the relationship between the timeout and the received message.</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="386" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="386" bodyend="429" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="117" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" compoundref="net__mgr_8h" startline="71">NET_STATUS_ERROR</references>
        <references refid="structnet__msg__s_1afe7bd3b4d167a78b1320114b9720c1a2" compoundref="proto_8h" startline="167">net_msg_s::pData</references>
        <references refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" compoundref="proto_8h" startline="171">net_msg_s::u8Type</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga18cdd7a4d256559f62e5b8882cd36740" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>int32_t NetMgr_ListenReady</definition>
        <argsstring>(void)</argsstring>
        <name>NetMgr_ListenReady</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>This function notify that previous listened net_msg_t buffer is no more pending. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="437" column="9" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="437" bodyend="451" declfile="/home/nono/OpenWize/sources/WizeCore/mgr/include/net_mgr.h" declline="118" declcolumn="9"/>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" compoundref="net__mgr_8h" startline="70">NET_STATUS_OK</references>
        <references refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" compoundref="net__mgr_8h" startline="72">NET_STATUS_BUSY</references>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga4b9a12f425ad36aaffad00cc5bdb9497" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void _net_mgr_main_</definition>
        <argsstring>(void const *argument)</argsstring>
        <name>_net_mgr_main_</name>
        <param>
          <type>void const *</type>
          <declname>argument</declname>
        </param>
        <briefdescription>
<para>This is the main task function, as FSM that treat events from net/phy and to/from other tasks. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">argument</parametername>
</parameternamelist>
<parameterdescription>
<para>(not used)</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="463" column="13" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="463" bodyend="544"/>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga8388711a75edd984630a480b69cbf63d" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void _net_mgr_evtCb_</definition>
        <argsstring>(uint32_t evt)</argsstring>
        <name>_net_mgr_evtCb_</name>
        <param>
          <type>uint32_t</type>
          <declname>evt</declname>
        </param>
        <briefdescription>
<para>ISR Callback function to notify an event occurs. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">evt</parametername>
</parameternamelist>
<parameterdescription>
<para>Notified event</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="554" column="13" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="554" bodyend="559"/>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga503233e1d895e69d029841f3f4f7a7d9" prot="public" static="yes" const="no" explicit="no" inline="yes" virt="non-virtual">
        <type>void</type>
        <definition>static void _net_mgr_notify_caller_</definition>
        <argsstring>(uint32_t evt)</argsstring>
        <name>_net_mgr_notify_caller_</name>
        <param>
          <type>uint32_t</type>
          <declname>evt</declname>
        </param>
        <briefdescription>
<para>Notify the caller an event occurs. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">evt</parametername>
</parameternamelist>
<parameterdescription>
<para>Notified event</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="569" column="20" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="569" bodyend="578"/>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga79dbea31614bb45c3c6deb979d8b211c" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>uint32_t</type>
        <definition>static uint32_t _net_mgr_fsm_</definition>
        <argsstring>(netdev_t *pNetDev, uint32_t u32Evt)</argsstring>
        <name>_net_mgr_fsm_</name>
        <param>
          <type><ref refid="group__wize__net__api_1gacf6042992f32f6caa9779564346c4a3f" kindref="member">netdev_t</ref> *</type>
          <declname>pNetDev</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>u32Evt</declname>
        </param>
        <briefdescription>
<para>Internal fsm. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">pNetDev</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to NetDev device </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">u32Evt</parametername>
</parameternamelist>
<parameterdescription>
<para>Event to treat</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_EVENT_SUCCESS</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dcaf0bb6dd6190aa921c24056840ad641e9" kindref="member">net_event_e::NET_EVENT_SUCCESS</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_EVENT_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca56c747fdb5c98d06c1346f086b40592d" kindref="member">net_event_e::NET_EVENT_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_EVENT_SEND_DONE</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dcade9515453f338241db2c064bd81b8447" kindref="member">net_event_e::NET_EVENT_SEND_DONE</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_EVENT_RECV_DONE</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dcad83b8693c3c03bcd44afd72b672d7c15" kindref="member">net_event_e::NET_EVENT_RECV_DONE</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_EVENT_FRM_PASSED</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dcaaa78e26bd359597ec2db36257a4be3fb" kindref="member">net_event_e::NET_EVENT_FRM_PASSED</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_EVENT_TIMEOUT</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca7fa77f9df6fe915d41ad1057f1b78611" kindref="member">net_event_e::NET_EVENT_TIMEOUT</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="596" column="17" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="596" bodyend="775"/>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga59a2f9fc28773f9243d17129af06d7b1" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>static int32_t _net_mgr_send_with_retry_</definition>
        <argsstring>(netdev_t *pNetDev, net_msg_t *pxNetMsg, uint8_t u8Retry)</argsstring>
        <name>_net_mgr_send_with_retry_</name>
        <param>
          <type><ref refid="group__wize__net__api_1gacf6042992f32f6caa9779564346c4a3f" kindref="member">netdev_t</ref> *</type>
          <declname>pNetDev</declname>
        </param>
        <param>
          <type><ref refid="group__wize__proto_1gaa869d642cfdd1c06d14478f701389342" kindref="member">net_msg_t</ref> *</type>
          <declname>pxNetMsg</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>u8Retry</declname>
        </param>
        <briefdescription>
<para>Internal function to send the given message with retry. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">pNetDev</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to device to send the message </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">pxNetMsg</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the message to send </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">u8Retry</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of retry</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="789" column="16" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="789" bodyend="816"/>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga3eb36dc446475d4299903fb49a96246f" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>static int32_t _net_mgr_listen_with_retry_</definition>
        <argsstring>(netdev_t *pNetDev, uint8_t u8Retry)</argsstring>
        <name>_net_mgr_listen_with_retry_</name>
        <param>
          <type><ref refid="group__wize__net__api_1gacf6042992f32f6caa9779564346c4a3f" kindref="member">netdev_t</ref> *</type>
          <declname>pNetDev</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>u8Retry</declname>
        </param>
        <briefdescription>
<para>Internal function to listen for message with retry. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">pNetDev</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to device to listen the message </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">u8Retry</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of retry</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NET_STATUS_OK</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">net_status_e::NET_STATUS_OK</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">net_status_e::NET_STATUS_ERROR</ref>) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>NET_STATUS_BUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>(see <ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">net_status_e::NET_STATUS_BUSY</ref>) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="829" column="16" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="829" bodyend="856"/>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1gaf93a007ffd6cedfb265d55dce15cc9c3" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>static int32_t _net_mgr_error_</definition>
        <argsstring>(netdev_t *pNetDev)</argsstring>
        <name>_net_mgr_error_</name>
        <param>
          <type><ref refid="group__wize__net__api_1gacf6042992f32f6caa9779564346c4a3f" kindref="member">netdev_t</ref> *</type>
          <declname>pNetDev</declname>
        </param>
        <briefdescription>
<para>Internal function to get and clear errors. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>1</parametername>
</parameternamelist>
<parameterdescription>
<para>Phy abort is required </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="865" column="16" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="865" bodyend="897"/>
      </memberdef>
      <memberdef kind="function" id="group__wize__net__mgr_1ga53ca0acd188ccd51e4a495f914d5ebd2" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32_t</type>
        <definition>static int32_t _net_mgr_try_abort_</definition>
        <argsstring>(netdev_t *pNetDev)</argsstring>
        <name>_net_mgr_try_abort_</name>
        <param>
          <type><ref refid="group__wize__net__api_1gacf6042992f32f6caa9779564346c4a3f" kindref="member">netdev_t</ref> *</type>
          <declname>pNetDev</declname>
        </param>
        <briefdescription>
<para>Internal function to abort and clean the current net/phy state. </para>
        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>1</parametername>
</parameternamelist>
<parameterdescription>
<para>Fatal : unable to Abort nor Reset the Phy device </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" line="906" column="16" bodyfile="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c" bodystart="906" bodyend="923"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>This file implement functions to manage network device in a multi-thread environment.. </para>
    </briefdescription>
    <detaileddescription>
<para><simplesect kind="copyright"><para>2019, GRDF, Inc. All rights reserved.</para>
</simplesect>
Redistribution and use in source and binary forms, with or without modification, are permitted (subject to the limitations in the disclaimer below) provided that the following conditions are met:<itemizedlist>
<listitem><para>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</para>
</listitem><listitem><para>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</para>
</listitem><listitem><para>Neither the name of GRDF, Inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</para>
</listitem></itemizedlist>
</para>
<para><simplesect kind="par"><title>Revision history</title><para></para>
</simplesect>
<simplesect kind="par"><title>1.0.0 : 2020/09/28[GBI]</title><para>Initial version </para>
</simplesect>
<simplesect kind="par"><title>2.0.0 : 2021/10/19[GBI]</title><para>Integrate a more complete management for sending and listening. </para>
</simplesect>
</para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"></codeline>
<codeline lineno="31"><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;C&quot;</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="net__mgr_8h" kindref="compound">net_mgr.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;rtos_macro.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="logger_8h" kindref="compound">logger.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="comment">/******************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="comment">//<sp/>Define<sp/>the<sp/>net_mgr<sp/>stack<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NET_MGR_TASK_STACK_SIZE<sp/>300</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Define<sp/>the<sp/>net_mgr<sp/>task<sp/>prority</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NET_MGR_TASK_PRIORITY<sp/>(UBaseType_t)(tskIDLE_PRIORITY+2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Define<sp/>the<sp/>timeout<sp/>on<sp/>trying<sp/>to<sp/>acquire<sp/>net_dev</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NET_DEV_ACQUIRE_TIMEOUT()<sp/>5</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Define<sp/>the<sp/>timeout<sp/>on<sp/>trying<sp/>to<sp/>acquire<sp/>net_mgr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NET_MGR_ACQUIRE_TIMEOUT()<sp/>10</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Define<sp/>the<sp/>timeout<sp/>to<sp/>&quot;be<sp/>notified&quot;<sp/>by<sp/>an<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NET_MGR_EVT_TIMEOUT()<sp/>0xFFFFFFFF</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Define<sp/>the<sp/>mask<sp/>when<sp/>the<sp/>tmo<sp/>has<sp/>already<sp/>been<sp/>expanded</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_NET_MGR_EXPAND_TMO_MSK_<sp/>0x10</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Define<sp/>the<sp/>mask<sp/>when<sp/>the<sp/>&quot;ready<sp/>to<sp/>listen<sp/>again&quot;<sp/>is<sp/>notified</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_NET_MGR_REARM_LISTEN_<sp/>0x20</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Define<sp/>the<sp/>number<sp/>of<sp/>retries<sp/>in<sp/>case<sp/>of<sp/>&quot;Phy<sp/>get<sp/>received&quot;<sp/>failure</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_NET_MGR_RECV_RETRIES_<sp/>3</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Define<sp/>the<sp/>number<sp/>of<sp/>retries<sp/>in<sp/>case<sp/>of<sp/>&quot;Phy<sp/>transmit&quot;<sp/>failure</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_NET_MGR_TRANS_RETRIES_<sp/>3</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="comment">/******************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Static<sp/>context<sp/>variables</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structwize__ctx__s" kindref="compound">wize_ctx_s</ref><sp/>sWizeCtx;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>sNetDev;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Static<sp/>functions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_net_mgr_main_(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*<sp/>argument);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_net_mgr_evtCb_(uint32_t<sp/>evt);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_net_mgr_notify_caller_(uint32_t<sp/>evt);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint32_t<sp/>_net_mgr_fsm_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev,<sp/>uint32_t<sp/>u32Evt);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>int32_t<sp/>_net_mgr_send_with_retry_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev,<sp/><ref refid="structnet__msg__s" kindref="compound">net_msg_t</ref><sp/>*pxNetMsg,<sp/>uint8_t<sp/>u8Retry);</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>int32_t<sp/>_net_mgr_listen_with_retry_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev,<sp/>uint8_t<sp/>u8Retry);</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>int32_t<sp/>_net_mgr_error_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>int32_t<sp/>_net_mgr_try_abort_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev);</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight><highlight class="comment">//<sp/>net_mgr<sp/>Task,<sp/>Mutex,<sp/>BinSem</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal">SYS_TASK_CREATE_DEF(netmgr,<sp/>NET_MGR_TASK_STACK_SIZE,<sp/>NET_MGR_TASK_PRIORITY);</highlight></codeline>
<codeline lineno="88"><highlight class="normal">SYS_MUTEX_CREATE_DEF(netmgr);</highlight></codeline>
<codeline lineno="89"><highlight class="normal">SYS_BINSEM_CREATE_DEF(netdev);</highlight></codeline>
<codeline lineno="95"><highlight class="comment">/******************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="111" refid="group__wize__net__mgr_1ga2b3d6e33db0904e597e5f8e59ba17839" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__mgr_1ga2b3d6e33db0904e597e5f8e59ba17839" kindref="member">NetMgr_Setup</ref>(<ref refid="structphydev__s" kindref="compound">phydev_t</ref><sp/>*pPhyDev,<sp/><ref refid="structwize__net__s" kindref="compound">wize_net_t</ref><sp/>*pWizeNet)</highlight></codeline>
<codeline lineno="112"><highlight class="normal">{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>i32Ret<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>a<sp/>binary<sp/>semaphore<sp/>to<sp/>lock<sp/>the<sp/>netdev_s<sp/>resource</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>sNetDev.hLock<sp/>=<sp/>SYS_BINSEM_CREATE_CALL(netdev);</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>assert(sNetDev.hLock);</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>a<sp/>mutex<sp/>to<sp/>lock<sp/>the<sp/>net_mgr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/>sWizeCtx.hMutex<sp/>=<sp/>SYS_MUTEX_CREATE_CALL(netmgr);</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/>assert(sWizeCtx.hMutex);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>the<sp/>net_mgr<sp/>task</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>sWizeCtx.hTask<sp/>=<sp/>SYS_TASK_CREATE_CALL(netmgr,<sp/>_net_mgr_main_,<sp/>NULL);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>assert(sWizeCtx.hTask);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>assert(pPhyDev);</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/>assert(pWizeNet);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>i32Ret<sp/>=<sp/><ref refid="group__wize__net__api_1gaa9d632ee79d28d7a0415a25e85f073b8" kindref="member">WizeNet_Setup</ref>(&amp;sNetDev,<sp/>pWizeNet,<sp/>pPhyDev);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>assert(!i32Ret);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>sWizeCtx.hCaller<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/>sWizeCtx.u8RecvRetries<sp/>=<sp/>_NET_MGR_RECV_RETRIES_;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>sWizeCtx.u8TransRetries<sp/>=<sp/>_NET_MGR_TRANS_RETRIES_;</highlight></codeline>
<codeline lineno="136"><highlight class="normal">}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="145" refid="group__wize__net__mgr_1ga93fdfbb50319f7587f3822fa309c4c47" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1ga93fdfbb50319f7587f3822fa309c4c47" kindref="member">NetMgr_Init</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="146"><highlight class="normal">{</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">NET_STATUS_ERROR</ref>;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hTask<sp/>&amp;&amp;<sp/>sNetDev.pCtx<sp/>&amp;&amp;<sp/>sNetDev.pPhydev)</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="group__time__evt_1ga7c59534f9e854577f5c3527ee579812a" kindref="member">TimeEvt_TimerInit</ref>(&amp;(sWizeCtx.sTimeOut),<sp/>sWizeCtx.hTask,<sp/><ref refid="group__time__evt_1gga8fcf7b8fdc4fc8ab6ccc2d6a79de908eaddac08a780f49730bf18fbc72cb7de46" kindref="member">TIMEEVT_CFG_ONESHOT</ref>)<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1gadba355920bf6ac45fb3939cfbb713e3a" kindref="member">WizeNet_Init</ref>(&amp;sNetDev,<sp/>&amp;_net_mgr_evtCb_);</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.i16ExpandTmo<sp/>=<sp/>900;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="157"><highlight class="normal">}</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="166" refid="group__wize__net__mgr_1ga7cb7be2b8675c73ac3092634358d534b" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1ga7cb7be2b8675c73ac3092634358d534b" kindref="member">NetMgr_Uninit</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="167"><highlight class="normal">{</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">NET_STATUS_ERROR</ref>;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hTask<sp/>&amp;&amp;<sp/>sNetDev.pCtx<sp/>&amp;&amp;<sp/>sNetDev.pPhydev)</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" kindref="member">TimeEvt_TimerStop</ref>(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1gafa0c0d696000e9c838c1892d8a7a2d9e" kindref="member">WizeNet_Uninit</ref>(&amp;sNetDev);</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="175"><highlight class="normal">}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight><highlight class="comment">/******************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="188" refid="group__wize__net__mgr_1ga3f89ec63616af2f1315b9e234ddf2c5e" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1ga3f89ec63616af2f1315b9e234ddf2c5e" kindref="member">NetMgr_Open</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*hTaskToNotify)</highlight></codeline>
<codeline lineno="189"><highlight class="normal">{</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>acquire<sp/>the<sp/>Net<sp/>Mgr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>xSemaphoreTake(<sp/>sWizeCtx.hMutex,<sp/>NET_MGR_ACQUIRE_TIMEOUT())<sp/>==<sp/>0<sp/>)</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">NET_STATUS_BUSY</ref>;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Try<sp/>to<sp/>Init<sp/>device</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__wize__net__mgr_1ga93fdfbb50319f7587f3822fa309c4c47" kindref="member">NetMgr_Init</ref>()<sp/>!=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">NET_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xSemaphoreGive(sWizeCtx.hMutex);</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">NET_STATUS_ERROR</ref>;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hTaskToNotify)</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.hCaller<sp/>=<sp/>hTaskToNotify;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.hCaller<sp/>=<sp/>xTaskGetCurrentTaskHandle(<sp/>);</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>xSemaphoreGive(sNetDev.hLock);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">NET_STATUS_OK</ref>;</highlight></codeline>
<codeline lineno="211"><highlight class="normal">}</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="219" refid="group__wize__net__mgr_1ga9fcf4c3978cbc4f9a3765fc818f14e4a" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1ga9fcf4c3978cbc4f9a3765fc818f14e4a" kindref="member">NetMgr_Close</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="220"><highlight class="normal">{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>caller<sp/>own<sp/>the<sp/>NetMgr<sp/>mutex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hCaller<sp/>==<sp/>xTaskGetCurrentTaskHandle(<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__wize__net__mgr_1ga7cb7be2b8675c73ac3092634358d534b" kindref="member">NetMgr_Uninit</ref>();</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.hCaller<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xSemaphoreGive(sWizeCtx.hMutex);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">NET_STATUS_OK</ref>;</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">NET_STATUS_BUSY</ref>;</highlight></codeline>
<codeline lineno="230"><highlight class="normal">}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="242" refid="group__wize__net__mgr_1gacf1a1d58d91c09e6505d6c09a32a35b0" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1gacf1a1d58d91c09e6505d6c09a32a35b0" kindref="member">NetMgr_SetUplink</ref>(<ref refid="group__wize__phy__itf_1gaf0a30dbd383c5ecdd20797b1b76b16cd" kindref="member">phy_chan_e</ref><sp/>eChannel,<sp/><ref refid="group__wize__phy__itf_1ga896b435cd1e07f9e75d557d00e063640" kindref="member">phy_mod_e</ref><sp/>eMod)</highlight></codeline>
<codeline lineno="243"><highlight class="normal">{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">NET_STATUS_BUSY</ref>;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>caller<sp/>own<sp/>the<sp/>NetMgr<sp/>mutex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hCaller<sp/>==<sp/>xTaskGetCurrentTaskHandle(<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>acquire<sp/>the<sp/>Net<sp/>Dev</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>xSemaphoreTake(<sp/>sNetDev.hLock,<sp/>NET_DEV_ACQUIRE_TIMEOUT())<sp/>)</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(&amp;sNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a76e38932444df5acef512e30ea570a10" kindref="member">NETDEV_CTL_SET_UPLINK_CH</ref>,<sp/>(uint32_t)eChannel);</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref>)</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(&amp;sNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a0694afdbbb1fdcb02002becc512bc37b" kindref="member">NETDEV_CTL_SET_UPLINK_MOD</ref>,<sp/>(uint32_t)eMod);</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xSemaphoreGive(sNetDev.hLock);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="260"><highlight class="normal">}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="272" refid="group__wize__net__mgr_1ga8a68d7f5083d83191fefef6df42006c6" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1ga8a68d7f5083d83191fefef6df42006c6" kindref="member">NetMgr_SetDwlink</ref>(<ref refid="group__wize__phy__itf_1gaf0a30dbd383c5ecdd20797b1b76b16cd" kindref="member">phy_chan_e</ref><sp/>eChannel,<sp/><ref refid="group__wize__phy__itf_1ga896b435cd1e07f9e75d557d00e063640" kindref="member">phy_mod_e</ref><sp/>eMod)</highlight></codeline>
<codeline lineno="273"><highlight class="normal">{</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">NET_STATUS_BUSY</ref>;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>caller<sp/>own<sp/>the<sp/>NetMgr<sp/>mutex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hCaller<sp/>==<sp/>xTaskGetCurrentTaskHandle(<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>acquire<sp/>the<sp/>Net<sp/>Dev</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>xSemaphoreTake(<sp/>sNetDev.hLock,<sp/>NET_DEV_ACQUIRE_TIMEOUT())<sp/>)</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(&amp;sNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a83701ee21336ef6256368be0b7fef2e3" kindref="member">NETDEV_CTL_SET_DWLINK_CH</ref>,<sp/>(uint32_t)eChannel);</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref>)</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(&amp;sNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672ac28da7956b6f7964b75e6f9b7f072272" kindref="member">NETDEV_CTL_SET_DWLINK_MOD</ref>,<sp/>(uint32_t)eMod);</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xSemaphoreGive(sNetDev.hLock);</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="290"><highlight class="normal">}</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="302" refid="group__wize__net__mgr_1ga170822ccc281fab3fa79b97bbab5c02b" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1ga170822ccc281fab3fa79b97bbab5c02b" kindref="member">NetMgr_Ioctl</ref>(uint32_t<sp/>eCtl,<sp/>uint32_t<sp/>args)</highlight></codeline>
<codeline lineno="303"><highlight class="normal">{</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">NET_STATUS_BUSY</ref>;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>caller<sp/>own<sp/>the<sp/>NetMgr<sp/>mutex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hCaller<sp/>==<sp/>xTaskGetCurrentTaskHandle(<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>acquire<sp/>the<sp/>Net<sp/>Dev</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>xSemaphoreTake(<sp/>sNetDev.hLock,<sp/>NET_DEV_ACQUIRE_TIMEOUT())<sp/>)</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(&amp;sNetDev,<sp/>eCtl,<sp/>args);</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xSemaphoreGive(sNetDev.hLock);</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="316"><highlight class="normal">}</highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="328" refid="group__wize__net__mgr_1ga3612af35635579e2cfe4ea7850366941" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1ga3612af35635579e2cfe4ea7850366941" kindref="member">NetMgr_Send</ref>(<ref refid="structnet__msg__s" kindref="compound">net_msg_t</ref><sp/>*pxNetMsg,<sp/>uint32_t<sp/>u32TimeOut)</highlight></codeline>
<codeline lineno="329"><highlight class="normal">{</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>tmoCoarse;</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/>int16_t<sp/>tmoFine;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>tmoCoarse<sp/>=<sp/>u32TimeOut/1000;</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/>tmoFine<sp/>=<sp/>u32TimeOut<sp/>-<sp/>tmoCoarse*1000;</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">NET_STATUS_ERROR</ref>;</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>pxNetMsg<sp/>&amp;&amp;<sp/>pxNetMsg-&gt;<ref refid="structnet__msg__s_1afe7bd3b4d167a78b1320114b9720c1a2" kindref="member">pData</ref>)</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>pxNetMsg-&gt;<ref refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" kindref="member">u8Type</ref><sp/>&gt;=<sp/>APP_TYPE_NB<sp/>)</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_ERR(</highlight><highlight class="stringliteral">&quot;APP<sp/>type<sp/>UNKNOWN\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">NET_STATUS_BUSY</ref>;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>caller<sp/>own<sp/>the<sp/>NetMgr<sp/>mutex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hCaller<sp/>==<sp/>xTaskGetCurrentTaskHandle(<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>acquire<sp/>the<sp/>Net<sp/>Dev</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>xSemaphoreTake(<sp/>sNetDev.hLock,<sp/>NET_DEV_ACQUIRE_TIMEOUT())<sp/>)</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.pBuffDesc<sp/>=<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*)pxNetMsg;</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.<ref refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" kindref="member">u8Type</ref><sp/>=<sp/>pxNetMsg-&gt;<ref refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" kindref="member">u8Type</ref>;</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.eListenType<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>send</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/>_net_mgr_send_with_retry_(&amp;sNetDev,<sp/>pxNetMsg,<sp/>sWizeCtx.u8TransRetries);</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="group__time__evt_1gac2dd6309cfdcb775e0dd564c7224293f" kindref="member">TimeEvt_TimerStart</ref>(&amp;sWizeCtx.sTimeOut,<sp/>tmoCoarse,<sp/>tmoFine,<sp/>(uint32_t)<ref refid="group__wize__net__api_1gga60578474790c3d9123eb079bfb85ca13ab1a1be688b68729d568ff6e10ebb5cdc" kindref="member">NETDEV_EVT_TIMEOUT</ref><sp/>))</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_net_mgr_try_abort_(&amp;sNetDev);</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">NET_STATUS_ERROR</ref>;</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="371"><highlight class="normal">}</highlight></codeline>
<codeline lineno="372"><highlight class="normal"></highlight></codeline>
<codeline lineno="386" refid="group__wize__net__mgr_1gacff959e8b27662070573a8aef4bb6fe8" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1gacff959e8b27662070573a8aef4bb6fe8" kindref="member">NetMgr_Listen</ref>(<ref refid="structnet__msg__s" kindref="compound">net_msg_t</ref><sp/>*pxNetMsg,<sp/>uint32_t<sp/>u32TimeOut,<sp/><ref refid="group__wize__net__mgr_1gaa14214208285671836bdb8eccf56719b" kindref="member">net_listen_type_e</ref><sp/><ref refid="structwize__ctx__s_1ac2e53f8067256aa4da0f5b55aa10a040" kindref="member">eListenType</ref>)</highlight></codeline>
<codeline lineno="387"><highlight class="normal">{</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>tmoCoarse;</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/>int16_t<sp/>tmoFine;</highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/>tmoCoarse<sp/>=<sp/>u32TimeOut/1000;</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/>tmoFine<sp/>=<sp/>u32TimeOut<sp/>-<sp/>tmoCoarse*1000;</highlight></codeline>
<codeline lineno="394"><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">NET_STATUS_ERROR</ref>;</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>pxNetMsg<sp/>&amp;&amp;<sp/>pxNetMsg-&gt;<ref refid="structnet__msg__s_1afe7bd3b4d167a78b1320114b9720c1a2" kindref="member">pData</ref>)</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>pxNetMsg-&gt;<ref refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" kindref="member">u8Type</ref><sp/>&gt;=<sp/>APP_TYPE_NB<sp/>)</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_ERR(</highlight><highlight class="stringliteral">&quot;APP<sp/>type<sp/>UNKNOWN\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">NET_STATUS_BUSY</ref>;</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>caller<sp/>own<sp/>the<sp/>NetMgr<sp/>mutex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hCaller<sp/>==<sp/>xTaskGetCurrentTaskHandle(<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>acquire<sp/>the<sp/>Net<sp/>Dev</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>xSemaphoreTake(<sp/>sNetDev.hLock,<sp/>NET_DEV_ACQUIRE_TIMEOUT())<sp/><sp/>)</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.pBuffDesc<sp/>=<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*)pxNetMsg;</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.<ref refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" kindref="member">u8Type</ref><sp/>=<sp/>pxNetMsg-&gt;<ref refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" kindref="member">u8Type</ref>;</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.eListenType<sp/>=<sp/><ref refid="structwize__ctx__s_1ac2e53f8067256aa4da0f5b55aa10a040" kindref="member">eListenType</ref>;</highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>listen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/>_net_mgr_listen_with_retry_(&amp;sNetDev,<sp/>sWizeCtx.u8RecvRetries);</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="group__time__evt_1gac2dd6309cfdcb775e0dd564c7224293f" kindref="member">TimeEvt_TimerStart</ref>(&amp;sWizeCtx.sTimeOut,<sp/>tmoCoarse,<sp/>tmoFine,<sp/>(uint32_t)<ref refid="group__wize__net__api_1gga60578474790c3d9123eb079bfb85ca13ab1a1be688b68729d568ff6e10ebb5cdc" kindref="member">NETDEV_EVT_TIMEOUT</ref><sp/>))</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_net_mgr_try_abort_(&amp;sNetDev);</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6aaa0733bed07e3d61726faaf2b825df55" kindref="member">NET_STATUS_ERROR</ref>;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="429"><highlight class="normal">}</highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight></codeline>
<codeline lineno="437" refid="group__wize__net__mgr_1ga18cdd7a4d256559f62e5b8882cd36740" refkind="member"><highlight class="normal">int32_t<sp/><ref refid="group__wize__net__mgr_1ga18cdd7a4d256559f62e5b8882cd36740" kindref="member">NetMgr_ListenReady</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="438"><highlight class="normal">{</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus;</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a014c7bd16060670c871f91bb4e546bc3" kindref="member">NET_STATUS_OK</ref>;</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>caller<sp/>own<sp/>the<sp/>NetMgr<sp/>mutex</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hCaller<sp/>==<sp/>xTaskGetCurrentTaskHandle(<sp/>)<sp/>)</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xTaskNotify(sWizeCtx.hTask,<sp/>_NET_MGR_REARM_LISTEN_,<sp/>eSetBits);</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga4264e9a8e2c8a6cad21139de3ab881f6a3f93cd147e9fdd3e0a769b4122a7e524" kindref="member">NET_STATUS_BUSY</ref>;</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="451"><highlight class="normal">}</highlight></codeline>
<codeline lineno="452"><highlight class="normal"></highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight><highlight class="comment">/******************************************************************************/</highlight></codeline>
<codeline lineno="463"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_net_mgr_main_(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*<sp/>argument)</highlight></codeline>
<codeline lineno="464"><highlight class="normal">{</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>u32Evt;</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>u32BackEvt;</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>bAbort<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>bError<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(1)</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca09a5b4f3a1a9fa094dab145cc099b668" kindref="member">NET_EVENT_NONE</ref>;</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bError<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bAbort<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>waiting<sp/>for<sp/>event<sp/>:<sp/>timeout<sp/>...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>xTaskNotifyWait(0,<sp/>ULONG_MAX,<sp/>&amp;u32Evt,<sp/>NET_MGR_EVT_TIMEOUT())<sp/>==<sp/>1<sp/>)</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Treat<sp/>NetDev<sp/>state</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(sNetDev.eState)</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__api_1gga1b0bb3e6064c1843396cb56730b4efd2a45e8e342950547d552033cc9c1ad29d6" kindref="member">NETDEV_STATE_ERROR</ref>:</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_DBG(</highlight><highlight class="stringliteral">&quot;NET<sp/>State<sp/>ERROR\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bError<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__api_1gga1b0bb3e6064c1843396cb56730b4efd2ab2f8cb86f9c29ce6aa6af9b97c73a6ad" kindref="member">NETDEV_STATE_UNKWON</ref>:</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Maybe<sp/>it&apos;s<sp/>not<sp/>initialized</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_DBG(</highlight><highlight class="stringliteral">&quot;NET<sp/>State<sp/>UNKOWN\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>NetDev<sp/>is<sp/>busy,<sp/>so<sp/>wait<sp/>for<sp/>an<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__api_1gga1b0bb3e6064c1843396cb56730b4efd2a9a1f4540a1a6afec747feaf0bca8371e" kindref="member">NETDEV_STATE_BUSY</ref>:</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__api_1gga1b0bb3e6064c1843396cb56730b4efd2afc0f457355583725d3792bfda33d11a0" kindref="member">NETDEV_STATE_IDLE</ref>:</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/>_net_mgr_fsm_(&amp;sNetDev,<sp/>u32Evt);</highlight></codeline>
<codeline lineno="499"><highlight class="normal"></highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>u32BackEvt<sp/>&amp;<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca7fa77f9df6fe915d41ad1057f1b78611" kindref="member">NET_EVENT_TIMEOUT</ref><sp/>)</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bAbort<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>u32BackEvt<sp/>&amp;<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca56c747fdb5c98d06c1346f086b40592d" kindref="member">NET_EVENT_ERROR</ref><sp/>)</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bError<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>else,<sp/>do<sp/>nothing</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"></highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bError)</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_net_mgr_error_(&amp;sNetDev))</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bAbort<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bAbort)</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Abort<sp/>the<sp/>current<sp/>request</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>_net_mgr_try_abort_(&amp;sNetDev)<sp/>)</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ulBckFlag<sp/>=<sp/>NET_EVT_FATAL;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(&amp;sNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a4671a2ddcc1a64b9166b508e81c79993" kindref="member">NETDEV_CTL_PHY_CMD</ref>,<sp/><ref refid="group__wize__phy__itf_1ggafbdbc8d1faf5deaac496ad929db06eaca826f156c530260644efee6035552c866" kindref="member">PHY_CTL_CMD_SLEEP</ref>);</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>send<sp/>back<sp/>notify<sp/>to<sp/>the<sp/>caller</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_net_mgr_notify_caller_(u32BackEvt);</highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bError<sp/>||<sp/>bAbort)</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xSemaphoreGive(sNetDev.hLock);</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="544"><highlight class="normal">}</highlight></codeline>
<codeline lineno="545"><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_net_mgr_evtCb_(uint32_t<sp/>evt)</highlight></codeline>
<codeline lineno="555"><highlight class="normal">{</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/>BaseType_t<sp/>xHigherPriorityTaskWoken;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/>xTaskNotifyFromISR(sWizeCtx.hTask,<sp/>evt,<sp/>eSetBits,<sp/>&amp;xHigherPriorityTaskWoken<sp/>);</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/>portYIELD_FROM_ISR(<sp/>xHigherPriorityTaskWoken<sp/>);</highlight></codeline>
<codeline lineno="559"><highlight class="normal">}</highlight></codeline>
<codeline lineno="560"><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_net_mgr_notify_caller_(uint32_t<sp/>evt)</highlight></codeline>
<codeline lineno="570"><highlight class="normal">{</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.hCaller)</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(evt<sp/>!=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca09a5b4f3a1a9fa094dab145cc099b668" kindref="member">NET_EVENT_NONE</ref>)</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xTaskNotify(sWizeCtx.hCaller,<sp/>evt,<sp/>eSetBits);</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="578"><highlight class="normal">}</highlight></codeline>
<codeline lineno="579"><highlight class="normal"></highlight></codeline>
<codeline lineno="580"><highlight class="normal"></highlight><highlight class="comment">/******************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="581"><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint32_t<sp/>_net_mgr_fsm_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev,<sp/>uint32_t<sp/>u32Evt)</highlight></codeline>
<codeline lineno="597"><highlight class="normal">{</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>u32BackEvt;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus;</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structnet__msg__s" kindref="compound">net_msg_t</ref><sp/>*pxNetMsg;</highlight></codeline>
<codeline lineno="601"><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dcaf0bb6dd6190aa921c24056840ad641e9" kindref="member">NET_EVENT_SUCCESS</ref>;</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>pxNetMsg<sp/>=<sp/>(<ref refid="structnet__msg__s" kindref="compound">net_msg_t</ref>*)(sWizeCtx.pBuffDesc);</highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(u32Evt<sp/>&amp;<sp/>_NET_MGR_REARM_LISTEN_)</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.bListenPend<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="609"><highlight class="normal"></highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(u32Evt<sp/>&amp;<sp/><ref refid="group__wize__net__api_1gga60578474790c3d9123eb079bfb85ca13ae9a6f0900fd2bccf249bca21390d99fd" kindref="member">NETDEV_EVT_TX_COMPLETE</ref>)</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" kindref="member">TimeEvt_TimerStop</ref>(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(&amp;sNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a4671a2ddcc1a64b9166b508e81c79993" kindref="member">NETDEV_CTL_PHY_CMD</ref>,<sp/><ref refid="group__wize__phy__itf_1ggafbdbc8d1faf5deaac496ad929db06eaca826f156c530260644efee6035552c866" kindref="member">PHY_CTL_CMD_SLEEP</ref>);</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xSemaphoreGive(sNetDev.hLock);</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>|=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dcade9515453f338241db2c064bd81b8447" kindref="member">NET_EVENT_SEND_DONE</ref>;</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_FRM_OUT(</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="structwize__net__s" kindref="compound">wize_net_t</ref>*)sNetDev.pCtx)-&gt;aSendBuff,</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="structwize__net__s" kindref="compound">wize_net_t</ref>*)sNetDev.pCtx)-&gt;aSendBuff[0]+1</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="621"><highlight class="normal"></highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(u32Evt<sp/>&amp;<sp/><ref refid="group__wize__net__api_1gga60578474790c3d9123eb079bfb85ca13a91283ca754dda12f4582d616e9acf7c1" kindref="member">NETDEV_EVT_RX_STARTED</ref>)</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.eListenType<sp/>==<sp/><ref refid="group__wize__net__mgr_1ggaa14214208285671836bdb8eccf56719ba5a63232b6e47918406c64df95b1b9b23" kindref="member">NET_LISTEN_TYPE_DETECT</ref>)</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.u8Detected<sp/>|=<sp/>0x01;</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="629"><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(u32Evt<sp/>&amp;<sp/><ref refid="group__wize__net__api_1gga60578474790c3d9123eb079bfb85ca13ac8a358546686fc5954d2b7e2d621ec86" kindref="member">NETDEV_EVT_RX_COMPLETE</ref>)</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ensure<sp/>to<sp/>not<sp/>overwriting<sp/>net_msg_t<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>sWizeCtx.bListenPend<sp/>&amp;&amp;<sp/>sWizeCtx.eListenType<sp/>==<sp/><ref refid="group__wize__net__mgr_1ggaa14214208285671836bdb8eccf56719ba7ded9a3703da291fdd3d5ee82b797ee0" kindref="member">NET_LISTEN_TYPE_MANY</ref>)</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>listen<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/>_net_mgr_listen_with_retry_(pNetDev,<sp/>sWizeCtx.u8RecvRetries);</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>!=<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stop<sp/>time<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" kindref="member">TimeEvt_TimerStop</ref>(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>request<sp/>failed,<sp/>cancel<sp/>the<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca56c747fdb5c98d06c1346f086b40592d" kindref="member">NET_EVENT_ERROR</ref>;</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1ga8d2ec88580cf59bdb22d25b528a81b13" kindref="member">WizeNet_Recv</ref>(pNetDev,<sp/>pxNetMsg<sp/>);</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref>)</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pxNetMsg-&gt;<ref refid="structnet__msg__s_1a126eb90bceff21320fd2f0c63027430b" kindref="member">u8Type</ref><sp/>==<sp/>sWizeCtx.u8Type)</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.eListenType<sp/>==<sp/><ref refid="group__wize__net__mgr_1ggaa14214208285671836bdb8eccf56719ba7ded9a3703da291fdd3d5ee82b797ee0" kindref="member">NET_LISTEN_TYPE_MANY</ref>)</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/>_net_mgr_listen_with_retry_(pNetDev,<sp/>sWizeCtx.u8RecvRetries);</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>!=<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stop<sp/>time<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" kindref="member">TimeEvt_TimerStop</ref>(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>request<sp/>failed,<sp/>cancel<sp/>the<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca56c747fdb5c98d06c1346f086b40592d" kindref="member">NET_EVENT_ERROR</ref>;</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.bListenPend<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stop<sp/>time<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" kindref="member">TimeEvt_TimerStop</ref>(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xSemaphoreGive(sNetDev.hLock);</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>|=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dcad83b8693c3c03bcd44afd72b672d7c15" kindref="member">NET_EVENT_RECV_DONE</ref>;</highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_FRM_IN(</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="structwize__net__s" kindref="compound">wize_net_t</ref>*)sNetDev.pCtx)-&gt;aRecvBuff,</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="structwize__net__s" kindref="compound">wize_net_t</ref>*)sNetDev.pCtx)-&gt;aRecvBuff[0]+1</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>received<sp/>message<sp/>doesn&apos;t<sp/>match</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>listen<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/>_net_mgr_listen_with_retry_(pNetDev,<sp/>sWizeCtx.u8RecvRetries);</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>!=<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stop<sp/>time<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" kindref="member">TimeEvt_TimerStop</ref>(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>request<sp/>failed,<sp/>cancel<sp/>the<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca56c747fdb5c98d06c1346f086b40592d" kindref="member">NET_EVENT_ERROR</ref>;</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>|=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dcaaa78e26bd359597ec2db36257a4be3fb" kindref="member">NET_EVENT_FRM_PASSED</ref>;</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(_net_mgr_error_(pNetDev))</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//abort</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stop<sp/>time<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" kindref="member">TimeEvt_TimerStop</ref>(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>request<sp/>failed,<sp/>cancel<sp/>the<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca7fa77f9df6fe915d41ad1057f1b78611" kindref="member">NET_EVENT_TIMEOUT</ref>;</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>listen<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/>_net_mgr_listen_with_retry_(pNetDev,<sp/>sWizeCtx.u8RecvRetries);</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>!=<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stop<sp/>time<sp/>event</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__time__evt_1gac722a1c1aba48d94eca9fa649594a93d" kindref="member">TimeEvt_TimerStop</ref>(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>request<sp/>failed,<sp/>cancel<sp/>the<sp/>session</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca56c747fdb5c98d06c1346f086b40592d" kindref="member">NET_EVENT_ERROR</ref>;</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>FIXME</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="718"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(try_listen_again)</highlight></codeline>
<codeline lineno="719"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="720"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/>_net_mgr_listen_with_retry_(pNetDev,<sp/>sWizeCtx.u8RecvRetries);</highlight></codeline>
<codeline lineno="721"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="722"><highlight class="comment"></highlight></codeline>
<codeline lineno="723"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>stop_error</highlight></codeline>
<codeline lineno="724"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(<sp/>eStatus<sp/>!=<sp/>NETDEV_STATUS_OK<sp/>)</highlight></codeline>
<codeline lineno="725"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="726"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Stop<sp/>time<sp/>event</highlight></codeline>
<codeline lineno="727"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TimeEvt_TimerStop(&amp;sWizeCtx.sTimeOut);</highlight></codeline>
<codeline lineno="728"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>request<sp/>failed,<sp/>cancel<sp/>the<sp/>session</highlight></codeline>
<codeline lineno="729"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/>NET_EVENT_ERROR;</highlight></codeline>
<codeline lineno="730"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="731"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.u8Detected<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="735"><highlight class="normal"></highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(u32Evt<sp/>&amp;<sp/><ref refid="group__wize__net__api_1gga60578474790c3d9123eb079bfb85ca13ab1a1be688b68729d568ff6e10ebb5cdc" kindref="member">NETDEV_EVT_TIMEOUT</ref>)</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sWizeCtx.eListenType<sp/>==<sp/><ref refid="group__wize__net__mgr_1ggaa14214208285671836bdb8eccf56719ba5a63232b6e47918406c64df95b1b9b23" kindref="member">NET_LISTEN_TYPE_DETECT</ref>)</highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>we<sp/>have<sp/>already<sp/>expand<sp/>the<sp/>timeout<sp/>or<sp/>detected<sp/>starting<sp/>frame</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>!(sWizeCtx.u8Detected)<sp/>||<sp/>(sWizeCtx.u8Detected<sp/>&amp;<sp/>_NET_MGR_EXPAND_TMO_MSK_)<sp/>)</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.u8Detected<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>|=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca7fa77f9df6fe915d41ad1057f1b78611" kindref="member">NET_EVENT_TIMEOUT</ref>;</highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>expand<sp/>timeout</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sWizeCtx.u8Detected<sp/>=<sp/>_NET_MGR_EXPAND_TMO_MSK_;</highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="group__time__evt_1gac2dd6309cfdcb775e0dd564c7224293f" kindref="member">TimeEvt_TimerStart</ref>(</highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;sWizeCtx.sTimeOut,</highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0,<sp/>sWizeCtx.i16ExpandTmo,</highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)<ref refid="group__wize__net__api_1gga60578474790c3d9123eb079bfb85ca13ab1a1be688b68729d568ff6e10ebb5cdc" kindref="member">NETDEV_EVT_TIMEOUT</ref></highlight></codeline>
<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>))</highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca56c747fdb5c98d06c1346f086b40592d" kindref="member">NET_EVENT_ERROR</ref>;</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u32BackEvt<sp/>|=<sp/><ref refid="group__wize__net__mgr_1gga44c192bd9e39528b5318159b2d0085dca7fa77f9df6fe915d41ad1057f1b78611" kindref="member">NET_EVENT_TIMEOUT</ref>;</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="764"><highlight class="normal"></highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="766"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>u32BackEvt<sp/>&amp;<sp/>(NET_EVENT_ERROR<sp/>|<sp/>NET_EVENT_TIMEOUT)<sp/>)</highlight></codeline>
<codeline lineno="767"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="768"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_net_mgr_try_abort_(pNetDev);</highlight></codeline>
<codeline lineno="769"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WizeNet_Sleep(pNetDev);</highlight></codeline>
<codeline lineno="770"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="771"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="773"><highlight class="normal"></highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>u32BackEvt;</highlight></codeline>
<codeline lineno="775"><highlight class="normal">}</highlight></codeline>
<codeline lineno="776"><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="keyword">static</highlight><highlight class="normal"><sp/>int32_t<sp/>_net_mgr_send_with_retry_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev,<sp/><ref refid="structnet__msg__s" kindref="compound">net_msg_t</ref><sp/>*pxNetMsg,<sp/>uint8_t<sp/>u8Retry)</highlight></codeline>
<codeline lineno="790"><highlight class="normal">{</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref>;</highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>send</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1ga4557229fb917373a5e3fcb53ad5fd21c" kindref="member">WizeNet_Send</ref>(pNetDev,<sp/>pxNetMsg);</highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>everything<sp/>is<sp/>fine</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1ad294a109a1b4ac9ddbb5426617404890" kindref="member">NETDEV_STATUS_ERROR</ref>)</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>_net_mgr_error_(pNetDev)<sp/>)</highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>abort<sp/>the<sp/>current<sp/>Net<sp/>Device<sp/>Action</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_net_mgr_try_abort_(pNetDev);</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>else<sp/>//<sp/>NET_STATUS_BUSY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!u8Retry)</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u8Retry--;</highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(1);</highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="816"><highlight class="normal">}</highlight></codeline>
<codeline lineno="817"><highlight class="normal"></highlight></codeline>
<codeline lineno="829"><highlight class="keyword">static</highlight><highlight class="normal"><sp/>int32_t<sp/>_net_mgr_listen_with_retry_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev,<sp/>uint8_t<sp/>u8Retry)</highlight></codeline>
<codeline lineno="830"><highlight class="normal">{</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eStatus;</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>listen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eStatus<sp/>=<sp/><ref refid="group__wize__net__api_1gae9bedd126fb315623a2334966b0481d0" kindref="member">WizeNet_Listen</ref>(pNetDev);</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>everything<sp/>is<sp/>fine</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>eStatus<sp/>==<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1ad294a109a1b4ac9ddbb5426617404890" kindref="member">NETDEV_STATUS_ERROR</ref>)</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>_net_mgr_error_(pNetDev)<sp/>)</highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>abort<sp/>the<sp/>current<sp/>Net<sp/>Device<sp/>Action</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_net_mgr_try_abort_(pNetDev);</highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>else<sp/>//<sp/>NET_STATUS_BUSY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!u8Retry)</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u8Retry--;</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(1);</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eStatus;</highlight></codeline>
<codeline lineno="856"><highlight class="normal">}</highlight></codeline>
<codeline lineno="857"><highlight class="normal"></highlight></codeline>
<codeline lineno="865"><highlight class="keyword">static</highlight><highlight class="normal"><sp/>int32_t<sp/>_net_mgr_error_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev)</highlight></codeline>
<codeline lineno="866"><highlight class="normal">{</highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eRet<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*pErrStr<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>current<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(pNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672ae8f4d7d51080df5d92793c81683d15f2" kindref="member">NETDEV_CTL_GET_STR_ERR</ref>,<sp/>(uint32_t)(&amp;pErrStr));</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(pNetDev-&gt;<ref refid="structnetdev__s_1a339a785774d2927cfb2f298fbe57a944" kindref="member">eErrType</ref>)</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>error<sp/>on<sp/>protocol</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__api_1gga59c492c5b58742e7b6644b6143cdd588ad2034c8a050380dc04aec8938ee47ba6" kindref="member">NETDEV_ERROR_PROTO</ref>:</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>show<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(pNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a8e9196dae587b7e4868019208db4f2e4" kindref="member">NETDEV_CTL_GET_ERR</ref>,<sp/>0)<sp/>&gt;=<sp/><ref refid="group__wize__proto_1gga67f927d283d97b0f340f7f8c8500f274ad4a44485cb88dcd71a4442d7b814d5dd" kindref="member">PROTO_FRM_WRN</ref><sp/>)</highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_WRN(</highlight><highlight class="stringliteral">&quot;PROTO<sp/>:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>pErrStr);</highlight></codeline>
<codeline lineno="879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_ERR(</highlight><highlight class="stringliteral">&quot;PROTO<sp/>:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>pErrStr);</highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>error<sp/>on<sp/>phy</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__wize__net__api_1gga59c492c5b58742e7b6644b6143cdd588a2b0896e3eb988557f4f3585ca68fbcd3" kindref="member">NETDEV_ERROR_PHY</ref>:</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>show<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_ERR(</highlight><highlight class="stringliteral">&quot;PHY<sp/>:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>pErrStr);</highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Abort<sp/>the<sp/>current<sp/>request</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eRet<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(pNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672ace0e298539d15eb84cdef88ae0f771f9" kindref="member">NETDEV_CTL_CLR_ERR</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eRet;</highlight></codeline>
<codeline lineno="897"><highlight class="normal">}</highlight></codeline>
<codeline lineno="898"><highlight class="normal"></highlight></codeline>
<codeline lineno="906"><highlight class="keyword">static</highlight><highlight class="normal"><sp/>int32_t<sp/>_net_mgr_try_abort_(<ref refid="structnetdev__s" kindref="compound">netdev_t</ref><sp/>*pNetDev)</highlight></codeline>
<codeline lineno="907"><highlight class="normal">{</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/>int32_t<sp/>eRet<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Abort<sp/>the<sp/>current<sp/>request</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(pNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a4671a2ddcc1a64b9166b508e81c79993" kindref="member">NETDEV_CTL_PHY_CMD</ref>,<sp/><ref refid="group__wize__phy__itf_1ggafbdbc8d1faf5deaac496ad929db06eaca435b12c9f197ac28266f27ec025637cb" kindref="member">PHY_CTL_CMD_READY</ref>)<sp/>!=<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Fatal,<sp/>try<sp/>to<sp/>restart<sp/>the<sp/>module</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_ERR(</highlight><highlight class="stringliteral">&quot;NET<sp/>Abort\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_net_mgr_error_(pNetDev);</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="group__wize__net__api_1ga279ae9aabdf8eb53fc0fb880218bc92e" kindref="member">WizeNet_Ioctl</ref>(pNetDev,<sp/><ref refid="group__wize__net__api_1gga115abc2ea2f43599755e3a8692ae0672a4671a2ddcc1a64b9166b508e81c79993" kindref="member">NETDEV_CTL_PHY_CMD</ref>,<sp/><ref refid="group__wize__phy__itf_1ggafbdbc8d1faf5deaac496ad929db06eaca1782c40afcb1fa6400a33631471d1a34" kindref="member">PHY_CTL_CMD_RESET</ref>)<sp/>!=<sp/><ref refid="group__wize__net__api_1gga86dd2735986f16a1a4b8510c037c56a1add688afc493a49642229dc4fb78c4348" kindref="member">NETDEV_STATUS_OK</ref><sp/>)</highlight></codeline>
<codeline lineno="916"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>LOG_ERR(</highlight><highlight class="stringliteral">&quot;NET<sp/>Reset\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//assert(0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eRet<sp/>=<sp/>1;<sp/></highlight><highlight class="comment">//<sp/>should<sp/>never<sp/>reach<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eRet;</highlight></codeline>
<codeline lineno="923"><highlight class="normal">}</highlight></codeline>
<codeline lineno="924"><highlight class="normal"></highlight></codeline>
<codeline lineno="927"><highlight class="preprocessor">#ifdef<sp/>__cplusplus</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="928"><highlight class="normal">}</highlight></codeline>
<codeline lineno="929"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
    </programlisting>
    <location file="/home/nono/OpenWize/sources/WizeCore/mgr/src/net_mgr.c"/>
  </compounddef>
</doxygen>
